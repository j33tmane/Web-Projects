/*  AdBridg Connect v1.0.1, copyright AdBridg Inc. All rights reserved. */
/* Portions of this software are derived from PrebidJS (prebid.org) under the Apache 2.0 license (http://www.apache.org/licenses/LICENSE-2.0). The PrebidJS source code may be found at https://github.com/prebid/Prebid.js. */
!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(d)return d(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var d="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){function i(e,t){e&&t?typeof e.callBids===u.objectType_function?l[t]=e:s.logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):s.logError("bidAdaptor or bidderCode not specified")}var r=e("./adapters/aol"),d=e("./adapters/aoljsonp"),o=e("./adapters/sovrn"),a=e("./bidmanager.js"),s=e("./utils.js"),c=e("./adbridg/analytics"),u=e("./constants.json"),l={};n.callBids=function(e){c.biddingStarted(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bidderCode&&l[n.bidderCode]){s.logMessage("CALLING BIDDER ======= "+n.bidderCode);var i=l[n.bidderCode];i.callBids(n);var r=(new Date).getTime();a.registerBidRequestTime(n.bidderCode,r),i.defaultBidderSettings&&a.registerDefaultBidderSetting(n.bidderCode,i.defaultBidderSettings)}}},n.hasAdapter=function(e){return l[e]?!0:!1},window.navigator&&String(window.navigator.userAgent).match("Trident")?i(d(),"aol"):i(r(),"aol"),i(o(),"sovrn")},{"./adapters/aol":2,"./adapters/aoljsonp":3,"./adapters/sovrn":4,"./adbridg/analytics":5,"./bidmanager.js":12,"./constants.json":13,"./utils.js":15}],2:[function(e,t,n){var i=e("../utils.js"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),o=e("../adloader"),a=(e("../adbridg/analytics"),function(){function e(e){if(document.getElementById(e))return e;var t=f.createElement("DIV");return t.id=e+"-head-unit",p.appendChild(t),t.id}function t(e,t){var o,a=l[t.alias];if(!a)return void i.logError("AOL","ERROR","mismatched bid: "+t.placement);if(o=e.getCPM(),!o)return n(e,t);var s=String(e.getCreative()).match("pubadn=9003.1");s||(o*=(a.params.adjust||1).toFixed(2));var c=r.createBid(1);c.bidderCode="aol",c.ad=e.getCreative()+e.getPixels(),c.cpm=o,c.width=e.getAdWidth(),c.height=e.getAdHeight(),c.creativeId=e.getCreativeId(),c.adbbdr=a.adbbdr,c.adbuid=a.adbuid,c.adbbuid=a.adbbuid,c.adbinfo=[1,s?1:0,Math.round(1e4*e.getCPM()).toString(36)].join(","),d.addBidResponse(a.placementCode,c)}function n(e,t){var n=l[t.alias];if(!n)return void i.logError("AOL","ERROR","mismatched bid: "+t.placement);var o=r.createBid(2);o.bidderCode="aol",o.reason=e.getNbr(),o.raw=e.getResponse(),o.adbuid=n.adbuid,o.adbbdr=n.adbbdr,o.adbbuid=n.adbbuid,d.addBidResponse(n.placementCode,o)}function a(t){return l[t.params.alias]=t,{adContainerId:e(t.params.adContainerId),sizeId:t.params.sizeId,secure:!1,serviceType:"pubapi",performScreenDetection:!1,alias:t.params.alias,network:t.params.network,placement:t.params.placement,gpt:{adUnitPath:t.params.adUnitPath||t.placementCode,size:t.params.size},params:{cors:"yes",cmd:"bid"},pubApiConfig:h,placementCode:t.placementCode}}function s(){return window.ADTECH?void i._each(u,function(e){var t=a(e);ADTECH.loadAd(t)}):void i.logError("AOL","ERROR","adtech is not present!")}function c(e){u=e.bids,u&&u.length&&o.loadScript(g,s)}var u,l={},g="//aka-cdn.adtechus.com/dt/common/DAC.js",f=window.document,p=f.getElementsByTagName("HEAD")[0],h={pixelsDivId:e("adbapx"),defaultKey:"aolBid",pubApiOK:i.tryBidHandler(t),pubApiER:i.tryBidHandler(n)};return{callBids:c}});t.exports=a},{"../adbridg/analytics":5,"../adloader":10,"../bidfactory.js":11,"../bidmanager.js":12,"../utils.js":15}],3:[function(e,t,n){var i=e("../utils"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),o=(e("../adloader"),e("../adbridg/analytics"),[]),a=!1,s=!1,c=i.tryBidHandler(function(){if(!s){s=!0;var e=i.createInvisibleIframe(!0);try{document.body.appendChild(e)}catch(t){document.head.appendChild(e)}e.contentDocument.write(o.join())}}),u=function(e){for(var t=0;t<o.length;++t)if(o[t]==e)return;o.push(e),a||(a=!0,"complete"==document.readyState?setTimeout(c,100):document.addEventListener?document.addEventListener("readystatechange",function(){"complete"==document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),c())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),c())}))},l=function(){function e(e){var t=r.createBid(2);t.bidderCode="aol",t.adbuid=e.adbuid,t.adbbdr=e.adbbdr,t.adbbuid=e.adbbuid,d.addBidResponse(e.placementCode,t)}function t(t,n){var i=parseFloat(n.price);if(!i||0>=i)return void e(t);var o=r.createBid(1);o.bidderCode="aol",o.ad=n.adm;var a=String(n.adm).match("pubadn=9003.1");a||(i*=t.params.adjust||1),o.cpm=i,o.width=parseInt(n.w,10),o.height=parseInt(n.h,10),o.adbbdr=t.adbbdr,o.adbuid=t.adbuid,o.adbbuid=t.adbbuid,o.adbinfo=[2,n.impid,n.crid].join(","),d.addBidResponse(t.placementCode,o)}return{callBids:function(n){var r=(n.bids,Math.round(1e3*Math.random()));i._each(n.bids,function(n,d){var o="adtechCb"+r+"B"+d;window[o]=i.tryBidHandler(function(i){return window[o]=null,i.ext&&i.ext.pixels&&u(i.ext.pixels),i.nbr||!((i.seatbid||[{}])[0].bid||[]).length?void e(n):void t(n,i.seatbid[0].bid[0])});var a="http://adserver.adtechus.com/pubapi/3.0/"+n.params.network+"/"+n.params.placement+"/0/-1/ADTECH;callback="+o+";cmd=bid;alias="+n.params.alias+";grp="+r+";misc="+(new Date).getTime(),s=document.createElement("script");s.src=a,document.head.appendChild(s)})}}};t.exports=l},{"../adbridg/analytics":5,"../adloader":10,"../bidfactory.js":11,"../bidmanager.js":12,"../utils":15}],4:[function(e,t,n){var i=e("../constants.json"),r=e("../utils.js"),d=e("../bidfactory.js"),o=e("../bidmanager.js"),a=e("../adloader"),s="",c=!1,u=r.tryBidHandler(function(){var e=document.createElement("img");e.src=c}),l=function(e,t){c||(c="http://gslbeacon.lijit.com/beacon?viewId="+e+"_auction_api&rand="+(Math.round(8998*Math.random())+1e3)+"&informer="+t+"&type=fpads&loc="+encodeURIComponent(window.location.hostname)+"&v=1.2","complete"==document.readyState?setTimeout(u,100):document.addEventListener?document.addEventListener("readystatechange",function(){"complete"==document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),u())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),u())}))},g=function(){function e(e){var i=e.bids||[];n(t(i))}function t(e){var t,n={},i=[];e.forEach(function(e){n[r.getBidIdParamater("tagid",e.params)]=e});for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);return i}function n(e){var t=window.location.host,n=window.location.pathname+location.search+location.hash,i=[];s=e[0].placementCode,r._each(e,function(e){var t=r.getBidIdParamater("tagid",e.params),n=e.params.width,d=e.params.height;e.params.puser&&l(e.params.puser,e.params.pinformid),imp={id:r.getUniqueIdentifierStr(),banner:{w:n,h:d},tagid:t},i.push(imp),o.pbCallbackMap[imp.id]=e});var d={id:r.getUniqueIdentifierStr(),imp:i,site:{domain:t,page:n}},u="//"+c+"?callback=window.AdBridg.__sovrnResponse&br="+encodeURIComponent(JSON.stringify(d));a.loadScript(u,null)}var c="ap.lijit.com/rtb/bid";return window.AdBridg.__sovrnResponse=r.tryBidHandler(function(e){var t={};e&&e.id&&e.seatbid&&0!==e.seatbid.length&&e.seatbid[0].bid&&0!==e.seatbid[0].bid.length?e.seatbid[0].bid.forEach(function(n){var a,s="",c=n.impid,u=o.getPlacementIdByCBIdentifer(c);if(u)if(s=u.placementCode,u.status=i.STATUS.GOOD,a=parseFloat(n.price),0!==a){n.placementCode=s,n.size=u.sizes;var l=n.adm,g='<img src="'+n.nurl+'">';t=d.createBid(1),t.creative_id=n.Id,t.bidderCode="sovrn",t.cpm=a,t.ad=decodeURIComponent(l+g),r.isArray(u.sizes[0])?(t.width=parseInt(u.sizes[0][0],10),t.height=parseInt(u.sizes[0][1],10)):(t.width=parseInt(u.sizes[0],10),t.height=parseInt(u.sizes[1],10)),t.adbbdr=u.adbbdr,t.adbuid=u.adbuid,t.adbbuid=u.adbbuid,t.adbinfo=[e.id,n.impid,n.id].join(","),o.addBidResponse(s,t)}else t=d.createBid(2),t.bidderCode="sovrn",o.addBidResponse(s,t);else t=d.createBid(2),t.bidderCode="sovrn",o.addBidResponse(s,t)}):(t=d.createBid(2),t.bidderCode="sovrn",o.addBidResponse(s,t))}),{callBids:e}};t.exports=g},{"../adloader":10,"../bidfactory.js":11,"../bidmanager.js":12,"../constants.json":13,"../utils.js":15}],5:[function(e,t,n){var i,r=e("../utils"),d=(e("../prebid"),e("../adloader")),o=e("./configuration"),a=e("./proxy"),s=1,c=2,u=3,l={id:1,units:{},bidders:{},bids:{},winners:{},noconf:[]},g=function(){l={id:++l.id,units:{},bidders:{},bids:{},winners:{},noconf:[]}},f=1,p=function(){return{loading:1,interactive:2,complete:3}[document.readyState]||0},h=function(){var e=(new Date).getTime();try{_base_timing=Math.round(performance.now()),e-=_base_timing,h=function(){return p()+"T"+Math.round(performance.now()).toString(36)},i=[f,e.toString(36),h()]}catch(t){f=0,h=function(){return p()+"T"+Math.max(0,(new Date).getTime()-e).toString(36)},i=[f,e.toString(36),p()+"T0"]}};h(),document.addEventListener?document.addEventListener("readystatechange",function(){3==p()&&document.removeEventListener("readystatechange",arguments.callee),i.push(h())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){3==p()&&document.detachEvent("onreadystatechange",arguments.callee),i.push(h())});var m=function(){for(var e="",t=0;10>t;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e},b=m(),v=String((document.cookie.match(/_adb=([a-z0-9.]+)/)||[]).pop());v&&"a1"==v.substr(0,3)||(v="a1"+(new Date).getTime().toString(36)+m(),document.cookie="_adb="+v);var y,_=0,B={},A=!1,S=function(){clearTimeout(y);var e=[];return r._each(B,function(t,n){e.push(n+":"+t.p+":"+t.d.join(","))}),B={},_=0,e.join("&e=")},C=function(e,t,n,i){clearTimeout(y);var d=e+"."+t;B[d]||(B[d]={p:h(),d:[]}),B[d].d.push(escape(JSON.stringify(n))),_+=1,y=setTimeout(w,2e3),i&&(A=!0,r.logError(i),A=!1)},w=function(){E(u,1,l.id+"//"+_)},E=function(e,t,n){var a=[2,v,b].join(","),s=S(),c="http://adspsp.com:5050/pt/"+o.getClientId()+"/"+e+"/"+t+"/?a="+a+"&b="+n+"&e="+s+"&c="+encodeURIComponent(r.getTopWindowUrl())+"&d="+encodeURIComponent(r.getTopWindowRef())+"&f="+i.join(".")+"&g="+h();d.trackPixel(c)},T=function(e){return String(e).replace(/[^\d\w]/,"")},I=function(e){var t,n,i,r;for("object"!=typeof e[0]&&(e=[e]),i=[],t=0;t<e.length;++t){for(r=[],n=0;n<e[t].length;++n)r.push((parseInt(e[t][n],10)||0).toString(36));i.push(r.join("`"))}return i.join(".")},P=function(e,t){return e+"^"+I(t)},R=function(e,t,n){var i,d;return d=[],r._each(t.bids,function(t,o){i=[],r._each(t,function(t,r){return n&&!n[o+"."+r]?void q(o,e,t):void i.push(t)}),d.push(o+"@"+i.join("~"))}),e+"^"+I(t.gpt_sizes)+":"+d.join(",")},j=function(e){return Math.floor(1e4*e).toString(36)},U=function(e,t,n,i,r){var d;return d=e+"@"+t.toString(36),1==e&&(d+="^"+I(i)+"~"+j(r)),d};n.biddingUnit=function(e,t){var n,i,d,o,a;n=e.adbuid,l.units[n]&&D(R(n,l.units[n])),d={},r._each(e.bids,function(e){i=e.adbbdr,o=T(e.adbbuid),d[i]=d[i]||{},a=P(o,e.adbsize),d[i][o]=a,l.bidders[i]=l.bidders[i]||{},l.bidders[i][o]&&k(i,n,l.bidders[i][o]),l.bidders[i][o]=a,l.bids[n]=l.bids[n]||{},l.bids[n][i+"."+o]={info:!1,encoded_bid_string:U(3,-1)}}),l.units[n]={gpt_sizes:t,bids:d}},n.biddingStarted=function(e){var t,n,i,d;return t=[],i={},r._each(e,function(e){return n=o.getBidderidFromAdapterCode(e.bidderCode),n&&l.bidders[n]?void r._each(e.bids,function(e){var t=T(e.adbbuid);return encoded_bid_string=P(t,e.adbsize),i[n+"."+t]=1,l.bidders[n][t]?void(encoded_bid_string!=l.bidders[n][t]&&(N(n,unitid,encoded_bid_string),l.units[unitid].bids[n][t]=encoded_bid_string)):void G(n,unitid,encoded_bid_string)}):(d=[],r._each(e.bids,function(e){d.push(P(T(e.adbbuid),e.adbsize))}),void M(n,e.bidderCode,d))}),r._each(l.units,function(e,n){t.push(R(n,e,i))}),l.noconf.length&&x(l.noconf),t.length>10?void O(t.length,t.join("`")):void E(s,1,l.id+"//"+t.length+"-"+t.join("_"))},n.winningUnitBid=function(e){var t;t=o.getUnitidFromPlacementCode(e.adUnitCode),l.winners[t]=e.adbbdr+"."+T(e.adbbuid)},n.biddingComplete=function(e){var t,n,i,d;r._each(l.units,function(a,s){return t=o.getPlacementCodeFromUnitid(s),e[t]?void r._each(e[t].bids,function(e){n=e.adbbdr+"."+T(e.adbbuid),d=e.size?e.size.split("x"):[0,0],i=U(e.statusCode,e.timeToRespond,e.adId,d,e.cpm),l.bids[s][n]?l.bids[s][n]={info:escape(e.adbinfo),encoded_bid_string:i}:F(s,n,i)}):void z(s)})},n.adsDelivered=function(e){var t,n,i,d=[];r._each(e,function(e,a){return(t=o.getUnitidFromPlacementCode(a))?(e.isEmpty?(unit_delivery_descriptor="!",H(t)):(n=l.winners[t],n?unit_delivery_descriptor=n:unit_delivery_descriptor="?",unit_delivery_descriptor+="^"+I(e.size)+"/"+Number(e.lineItemId).toString(36)+"."+Number(e.creativeId).toString(36)),i=[],r._each(l.bids[t],function(e,t){t==n&&e.info&&(unit_delivery_descriptor+="~`"+e.info+"`"),i.push(t+"-"+e.encoded_bid_string)}),void d.push(t+"@"+unit_delivery_descriptor+":"+i.join(","))):void L(a,e.isEmpty)}),E(c,2,l.id+"//"+d.join("_"))},n.reset=function(){g()},n.noUnitConfig=function(e){l.noconf.push(e)};var x=function(e){C(101,1,e,"AdBridg misconfiguration: no config defined for units "+e.join(", "))};n.noUnitBidders=function(e){C(102,1,e,"AdBridg misconfiguration: no bidders defined for "+e)},n.missingBidders=function(e){C(103,1,e,"This AdBridg installation does not support bidderids "+e)},n.unsupportedBidder=function(e,t){C(104,1,[e,t],"AdBridg does not support bidder yet: "+t)};var D=function(e){C(105,1,e,"AdBridg detected a duplicate bid config for unit "+e)},k=function(e,t,n){C(106,1,[e,t,n],"AdBridg detected a duplicate bidder config for bidder unit "+n)};n.nothingToDo=function(){C(107,1,0,"AdBridg cannot execute: no ads have been defined")},n.refreshUnknown=function(e,t,n){C(108,1,[e,t?1:0,n?1:0],"AdBridg was asked to refresh an unknown slot: "+e+" (gpt-known="+t+", bid-config="+n+")")},n.unknownDomId=function(e){C(201,1,e,"AdBridg received an unregistered domid: "+e)},n.missingPlaceholders=function(e,t,n,i,r){C(202,21,[e,t,n,i,r],"AdBridg did not receive display() calls for "+(1==t?"bidding":"traditional")+" units: "+r.join(", "))},n.noPlaceholders=function(e){C(203,1,e,"AdBridg could not render any "+(1==e?"bidding":"traditional")+" units!")};var M=function(e,t,n){C(301,1,[e,t,n])},G=function(e,t,n){C(302,1,[e,t,n])},N=function(e,t,n){C(303,1,[e,t,n])},O=function(e,t,n){C(304,1,[e,t,n])},q=function(e,t,n){C(305,1,[e,t,n])},z=function(e){C(306,1,e,"AdBridg auction results are missing bids on unit "+e)},F=function(e,t,n){C(307,1,[e,t,n])};n.timedOut=function(e){C(308,1,e,"AdBridg detected global timeout (@"+o.getGlobalTimeout()+"ms) happened while "+e+" bids still pending")},n.latencyBids=function(e){var t=o.getGlobalTimeout().toString(36);C(309,1,[t,e])},n.deliveredUnknownSlot=function(e,t,n,i){C(401,1,[e,t,n,i?1:0])},n.undeliveredAds=function(e,t){C(402,1,[e,t],"AdBridg did not detect GPT delivery for "+(1==e?"bidding":"traditional")+" slots: "+t.join(", "))};var L=function(e,t){C(403,1,[e,t?1:0])},H=function(e){C(404,1,e,"AdBridg received no ad from DFP for unitid "+e)};n.bidderDebug=function(e){C(405,1,e)},n.pbjsError=function(e){A||C(501,1,e)},n.preBidError=function(e){C(502,1,e,"AdBridg caught a pre-bid error: "+e)},n.postBidError=function(e){C(503,1,e,"AdBridg caught a post-bid error: "+e)},n.refreshError=function(e){C(504,1,e,"AdBridg caught a refresh error: "+e)},a.setAnalytics(n)},{"../adloader":10,"../prebid":14,"../utils":15,"./configuration":6,"./proxy":9}],6:[function(e,t,n){var i=e("../utils"),r=e("../adaptermanager"),d=e("./analytics"),o={id:"1339625",adapters:{8:{server:"adserver.adtechus.com",network:"10279.1",adjust:.8},9:{puser:"sitepoint1",pinformid:13386399}},timeout:2500,units:{"/7448792/SP2013_Home_300x250_1":[1,[[8,[300,250],3715432,"Home_300x250_1",170],[9,[300,250],322020]]],"/7448792/SP2013_Home_300x250_3":[2,[[8,[300,250],3715434,"Home_300x250_3",170],[9,[300,250],322e3]]],"/7448792/SP2013_Home_300x250_5":[3,[[8,[300,250],3715436,"Home_300x250_5",170],[9,[300,250],322021]]],"/7448792/SP2013_Channel_728x90_1":[4,[[8,[728,90],3715437,"Channel_728x90_1",225],[9,[728,90],321999]]],"/7448792/SP2013_Channel_300x250_1":[5,[[8,[300,250],3715432,"Channel_300x250_1",170],[9,[300,250],322020]]],"/7448792/SP2013_Channel_300x250_3":[6,[[8,[300,250],3715434,"Channel_300x250_3",170],[9,[300,250],322e3]]],"/7448792/SP2013_Channel_300x250_5":[7,[[8,[300,250],3715436,"Channel_300x250_5",170],[9,[300,250],322021]]],"/7448792/SP2013_Articles_728x90_1":[8,[[8,[728,90],3715437,"Articles_728x90_1",225],[9,[728,90],321999]]],"/7448792/SP_Articles_728x90_Bottom":[9,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022]]],"/7448792/SP2013_Articles_300x250_1":[10,[[8,[300,250],3715432,"Articles_300x250_1",170],[9,[300,250],322020]]],"/7448792/SP2013_Articles_300x600_1":[11,[[8,[300,600],3715438,"Articles_300x600_1",529],[8,[160,600],3715433,"Articles_160x600_Flex",154],[8,[300,250],3715436,"Articles_300x250_Flex",170],[9,[300,600],322002],[9,[160,600],322011],[9,[300,250],322021]]]}},a={test:1,rubicon:2,pubmatic:3,openx:4,appnexus:5,criteo:6,amazon:7,aol:8,sovrn:9},s={};i._each(a,function(e,t){s[""+e]=t});var c=function(e){return s[""+e]||0};n.getBidderidFromAdapterCode=function(e){return a[e]||0};var u=function(e,t){return(o.adapters[String(e)]||{})[t]};n.getGlobalTimeout=function(){return n.forcedBidder()?1e4:o.timeout};var l={};i._each(o.units,function(e,t){l[e[0]]=t}),n.getClientId=function(){return o.id},n.getUnitidFromPlacementCode=function(e){return(o.units[e]||[0])[0]},n.getPlacementCodeFromUnitid=function(e){return l[e]||0},n.forcedBidder=function(){return(String(window.location.search).match(/adb_force_bidder=(\d+)/)||[]).pop()};var g=function(e,t){var n=Math.floor(e/t)*t;return Math.max(.01,n).toFixed(2)+"-"+(n+t-.01).toFixed(2)};n.getPbjsBidderSettings=function(){return{standard:{adserverTargeting:[{key:"adb_adid",val:function(e){return e.adId}},{key:"adb_hbc",val:function(e){if(n.forcedBidder())return"";var t=e.cpm;return 9.95>t?g(t,.05):"9.95-"}},{key:"adb_bdr",val:function(e){return n.forcedBidder()?"force":e.bidder}}]}}},n.getPbjsUnitConfiguration=function(e,t,a,s){var l,g,f,p,h,m,b,v,y,_,B;if(g=o.units[e],!g)return d.noUnitConfig(e),!1;s=s||{},f={adbuid:g[0],code:e,bids:[]},p=[],h=[t];var A=parseInt(n.forcedBidder(),10);for(l=0;l<g[1].length;++l)if(m=g[1][l],v=m[0],_=m[1],y=m[2],b=c(v),!A||A==v)if(r.hasAdapter(b)){switch(B={},b){case"test":break;case"aol":B={adContainerId:a,server:u(v,"server"),network:u(v,"network"),adjust:u(v,"adjust"),placement:y,alias:m[3],sizeId:m[4]};break;case"sovrn":B={tagid:y,width:_[0],height:_[1],puser:u(v,"puser"),pinformid:u(v,"pinformid")};break;default:d.unsupportedBidder(v,b);continue}h.push(_),f.bids.push({adbuid:g[0],adbbdr:v,adbbuid:y,adbsize:_,bidder:b,params:B})}else p.push(v);return p.length&&d.missingBidders(p),f.bids.length?(f.sizes=i.combineSizeInputs.apply(null,h),d.biddingUnit(f,t),f):(d.noUnitBidders(e),!1)}},{"../adaptermanager":1,"../utils":15,"./analytics":5}],7:[function(e,t,n){function i(){var e;o.bidderTimeout=a.getGlobalTimeout(),AdBridg.cmd.push=function(e){if(typeof e===l)try{e.call()}catch(t){d.logError("Error processing AdBridg command: "+(t.stack||t.message))}else d.logError("Commands written into AdBridg.cmd.push must wrapped in a function")},e=a.getPbjsBidderSettings(),e&&(o.bidderSettings=e),googletag.pubads().addEventListener("slotRenderEnded",function(e){c.gptSlotRendered(e)}),r()}function r(){for(;AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}}var d=e("../utils"),o=e("../prebid"),a=e("./configuration"),s=e("./analytics"),c=e("./gpt-workflow"),u=e("./proxy"),l="function";window.AdBridg=window.AdBridg||{},AdBridg.cmd=AdBridg.cmd||[];AdBridg.defineSlot=function(e,t,n,i){var r,o;return(o=c.getGPTSlot(e))?(d.logMessage("AdBridg received duplicate definition for slot "+e),o):(r=a.getPbjsUnitConfiguration(e,t,n,i),o=u.useGPT().defineSlot(e,t,n).addService(googletag.pubads()),c.storeSlot(e,n,r,o),o)},AdBridg.display=function(e){c.publisherCalledDisplay(e)},AdBridg.serve=function(e){var t=c.getPbjsArray();o.addAdUnits(t),e=typeof e==l?e:function(){d.debugTurnedOn()&&console.log("AdBridg Result: ",arguments)},c.execute(e)},AdBridg.render=function(e,t){o.renderAd(e,t)},AdBridg.refresh=function(e){try{d.isArray(e)||(e=[e]);var t=[],n=!1;d._each(e,function(e){var i,r;return"function"==typeof e.getAdUnitPath&&(i=e,e=i.getAdUnitPath()),r=c.getSlot(e),r&&r.pbjs_config?(i||(i=r.gpt_slot),void(r.queueRefresh()&&(n=!0))):(s.refreshUnknown(e,!!i,!!r.pbjs_config),void(i&&t.push(i)))}),t.length&&u.useGPT().pubads().refresh(t),n&&c.refresh()}catch(i){s.refreshError(i.stack||i.message)}},window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){try{i()}catch(e){s.preBidError(e.stack||e.message)}}),AdBridg.use_gpt_original=function(e){u.setGPT(e)}},{"../prebid":14,"../utils":15,"./analytics":5,"./configuration":6,"./gpt-workflow":8,"./proxy":9}],8:[function(e,t,n){function i(e){var t={};e.listen=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.forget=function(){t={}},e.trigger=function(n){var i=t[n]||[],r=Array.prototype.slice.call(arguments);r.unshift(e),c._each(i,function(e){e.apply(null,r)}),"destroy"==n&&(t={},e.listen=null,e.trigger=null)}}var r,d,o,a,s,c=e("../utils"),u=e("../prebid"),l=e("./analytics"),g=(e("./configuration"),e("./proxy")),f=5e3,p=500,h=1,m=2,b=3,v=4,y=0,_=1,B=2,A=3,S=1,C=2,w=function(){},E=!1,T=!1,I=!1,P=!1;n.getSlot=function(e){return r.getSlotByCode(e)},n.getGPTSlot=function(e){var t=n.getSlot(e);return t?t.gpt_slot:!1},n.storeSlot=function(e,t,n,i){var a=r.getSlotByCode(e);if(a)return c.logMessage("AdBridg received duplicate definition for slot "+e),a.gpt_slot;var a=new M(e,t,n,i),s=n?d:o;s.addSlot(a),r.addSlot(a)},n.getPbjsArray=function(){return d.getPbjsConfigurationArray()};var R=0;n.refresh=function(){j(v)&&a.requestPbjs()},n.execute=function(e){if(s!=v){if(d.getCount()&&o.getCount())s=b,c.logMessage("AdBridg is executing mixed mode");else if(d.getCount())s=h,c.logMessage("AdBridg is executing bidding mode");else{if(!o.getCount())return void l.nothingToDo();s=m,c.logMessage("AdBridg is executing traditional mode")}"function"==typeof e&&(w=e),"complete"==document.readyState?(R=1,AdBridg.cmd.push(D)):document.addEventListener?document.addEventListener("readystatechange",function(){"loading"!=document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),R=2,AdBridg.cmd.push(D))}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),R=3,AdBridg.cmd.push(D))}),j(b,h)&&(d.listen("reported",k),d.listen("slots_activated",function(){E&&d.requestAds()}),u.addCallback("allRequestedBidsBack",x),u.requestBids()),j(b)&&googletag.pubads().disableInitialLoad(),j(m)&&w.call(null,!1),j(b,m)&&(o.listen("reported",k),o.listen("slots_activated",o.requestAds),U())}},n.publisherCalledDisplay=function(e){var t=r.getSlotByDomId(e);return t?(t.activate(),void(I&&g.useGPT().display(t.dom_id))):void l.unknownDomId(e)},n.gptSlotRendered=function(e){var t=r.findGPTSlot(e.slot);return t?void t.render(e):void l.deliveredUnknownSlot(gpt_event.creativeId,gpt_event.lineItemId,gpt_event.size,gpt_event.isEmpty)};var j=function(){for(var e=0;e<arguments.length;++e)if(arguments[e]==s)return!0;return!1},U=function(){I||(I=!0,g.useGPT().enableServices(),r.each(function(e){e.activated&&g.useGPT().display(e.dom_id)}))},x=function(){if(!E){E=!0;var e=(j(v)?a:d,u.getBidResponses());l.biddingComplete(e),w(e),j(b,h,v)&&u.setTargetingForAdUnitsGPTAsync(),j(h)&&U(),j(b)&&T&&d.requestAds(),j(v)&&a.requestAds()}},D=function(){T=!0,j(b)?(o.requestAds(),E&&d.requestAds()):j(m)?o.renderTimeout(f):j(h)&&d.renderTimeout(f)},k=function(){if((!j(b)||d.reported&&o.reported)&&!P){P=!0;var e=j(v)?a:r,t=e.getDeliveredSlots(),n=e.getDeliveredSlotCodes();n.length&&l.adsDelivered(t),c.logMessage("AdBridg observed "+n.length+" GPT unit renderings: "+n.join(", "));var i=e.getEmptySlotCodes();i.length&&c.logMessage("(of those, "+i.length+" rendered empty: "+i.join(", ")+")"),E=!1,s=v}},M=function(e,t,n,r){this.placement_code=e,this.dom_id=t,this.pbjs_config=n,this.gpt_slot=r,this.activated=!1,this.rendered=!1;var d=this;i(this);var o=function(e,t,n){e.style.width&&String(e.style.width).replace("px","")!=t&&(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")!=n&&(e.style.height=n+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=n&&e.setAttribute("height",n)};this.resizeContainer=function(e,t){var n=document.getElementById(d.dom_id),i=n.getElementsByTagName("div"),r=n.getElementsByTagName("iframe"),a=RegExp("^google_ads_iframe_/"+d.placement_code);c._each(i,function(n){var i=String(n.id);i.match(a)&&!i.match("_hidden_")&&o(n,e,t)}),c._each(r,function(n){var i=String(n.id);i.match(a)&&!i.match("_hidden_")&&o(n,e,t)})},this.activate=function(){d.activated=!0,d.trigger("activate")},this.queueRefresh=function(){return d.rendered?(d.forget(),d.rendered=!1,a.addSlot(d),!0):(c.logMessage("AdBridg ignored refresh request for "+d.placement_code+" because it has not yet rendered the last request."),!1)},this.clearTargeting=function(){var e=[],t=d.gpt_slot.getTargetingMap();for(var n in t)"adb_hbc"!=n&&"adb_bdr"!=n&&"adb_adid"!=n&&e.push([n,t[n]]);d.gpt_slot.clearTargeting();for(var i=0;i<e.length;++i)d.gpt_slot.setTargeting(e[i][0],e[i][1])},this.render=function(n){return d.rendered?void c.logMessage("AdBridg received two render() calls for unit "+e+" with DOM ID "+t):(d.rendered={creativeId:n.creativeId||0,lineItemId:n.lineItemId||0,size:n.size,isEmpty:n.isEmpty},void d.trigger("render"))}},G=function(e){this.reported=!1;var t={},r={},d=0,o=0,B=0,w=!1,E=!1,T=!1,I=!1,U=this,x=[];i(this),this.getSlots=function(){return t};var D=function(e){return E?void c.logMessage("AdBridg slot activated after ads requested: ",e.placement_code):(o+=1,void(U.isActivated()&&U.trigger("slots_activated")))},M=function(e){j(h,m)&&N(C),B||U.clearTargeting(),B+=1,U.renderTimeout(p)},N=function(t){if(!T&&e!=y&&e!=A){T=!0;var n=U.getInactiveSlotCodes();n.length&&(l.missingPlaceholders(s,e,t,R,n),n.length==d&&l.noPlaceholders(e)),j(h,m)&&c.logMessage("AdBridg requested "+o+" "+(e==_?"bidding":"traditional")+" units from GPT: "+U.getActiveSlotCodes())}};this.each=function(e){c._each(t,e)},this.isActivated=function(){return d==o},this.isRendered=function(){return d&&d==B},this.addSlot=function(n){if(e==A&&(!j(v)||!this.isRendered()&&(w||E))){for(var i=0;i<x.length;++i)if(x[i]===n)return;return void x.push(n)}t[n.placement_code]=n,r[n.dom_id]=n,d+=1,n.listen("activate",D),n.listen("render",M)},this.requestPbjs=function(){if(!w&&!E){for(;x.length;)U.addSlot(x.shift());var e=[];l.reset(),c._each(U.getSlots(),function(t){e.push(t.pbjs_config),l.biddingUnit(t.pbjs_config,t.pbjs_config.sizes)}),w=!0,u.requestBidsForAdUnits(e)}},this.requestAds=function(){if(!E&&e!=y){if(E=!0,j(v)&&e==A){P=!1;var t=U.getActivatedGPTSlots();c.logMessage("AdBridg is requesting "+t.length+" refresh units from GPT: "+U.getActiveSlotCodes()),g.useGPT().pubads().refresh(t)}if(j(b)){N(S);var t=U.getActivatedGPTSlots();t.length&&(c.logMessage("AdBridg is requesting "+t.length+" "+(e==_?"bidding":"traditional")+" units from GPT: "+U.getActiveSlotCodes()),g.useGPT().pubads().refresh(t,{changeCorrelator:!1}))}U.renderTimeout(f)}},this.renderTimeout=function(e){clearTimeout(I),U.isRendered()?U.reportRender():I=setTimeout(U.reportRender,e)},this.reportRender=function(){if(clearTimeout(I),!U.reported&&e!=y){var i=U.getUndeliveredSlotCodes();if(i.length&&l.undeliveredAds(e,i),U.reported=!0,U.trigger("reported"),e==A&&(k(),U.forget(),t=!1,r=!1,a=new G(A),x.length)){for(;x.length;)a.addSlot(x.shift());c.logMessage("Next round of refreshes queued for 500ms: "+a.getActiveSlotCodes().join(", ")),setTimeout(c.tryBidHandler(n.refresh),500)}}},this.findGPTSlot=function(e){var n,i;for(n in t)if(t.hasOwnProperty(n)&&(i=t[n],i.gpt_slot===e))return i;return!1},this.getCount=function(){return d},this.getSlotByCode=function(e){return t[e]||!1},this.getSlotByDomId=function(e){return r[e]||!1},this.getPbjsConfigurationArray=function(){var e=[];return U.each(function(t){t.pbjs_config&&e.push(t.pbjs_config)}),e},this.getInactiveSlotCodes=function(){var e=[];return U.each(function(t,n){t.activated||e.push(n)}),e},this.getActiveSlotCodes=function(){var e=[];return U.each(function(t,n){t.activated&&e.push(n)}),e},this.getActivatedGPTSlots=function(){var e=[];return U.each(function(t,n){t.activated&&e.push(t.gpt_slot)}),e},this.getUndeliveredSlotCodes=function(){var e=[];return U.each(function(t,n){t.activated&&!t.rendered&&e.push(n)}),e},this.getDeliveredSlotCodes=function(){var e=[];return U.each(function(t,n){t.rendered&&e.push(n)}),e},this.getEmptySlotCodes=function(){var e=[];return U.each(function(t,n){t.rendered&&t.rendered.isEmpty&&e.push(n)}),e},this.getDeliveredSlots=function(){var e={};return U.each(function(t,n){t.rendered&&(e[n]=t.rendered)}),e},this.clearTargeting=function(){U.each(function(e){e.clearTargeting()})}};r=new G(y),d=new G(_),o=new G(B),a=new G(A),g.setResize(function(e,t,i){var r=n.getSlot(e);return r?void r.resizeContainer(t,i):c.logMessage("AdBridg was unable to locate slot for resizing"+[e,t,i].join("/"))})},{"../prebid":14,"../utils":15,"./analytics":5,"./configuration":6,"./proxy":9}],9:[function(e,t,n){var i=[];n.analytics=function(){i.push(Array.prototype.slice.apply(arguments))},n.setAnalytics=function(e){for(i.push=function(t){var n=t.shift();"function"==typeof e[n]&&e[n].apply(null,t)};i.length;)i.push(i.shift())};var r=[];n.waitForPbjs=function(e){r.push(e)},n.setPbjs=function(e){for(r.push=function(t){t.call(null,e)};r.length;)r.push(r.shift())};var d=!1;n.setGPT=function(e){d=e},n.useGPT=function(){return d?d:window.googletag};var o=function(){};n.setResize=function(e){o=e},n.resize=function(){o.apply(null,arguments)}},{}],10:[function(e,t,n){n.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,t&&"function"==typeof t&&(n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e;var i=document.getElementsByTagName("head");i=i.length?i:document.getElementsByTagName("body"),i.length&&(i=i[0],i.insertBefore(n,i.firstChild))},n.trackPixel=function(e){try{if(e+="&rnd="+Math.random()){var t=document.createElement("img");t.src=e}}catch(n){}}},{}],11:[function(e,t,n){function i(e){function t(){switch(i){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}var n=r.getUniqueIdentifierStr(),i=e||0;this.bidderCode="",this.width=0,this.height=0,this.statusMessage=t(),this.statusCode=e,this.adId=n,this.getStatusCode=function(){return i},this.getSize=function(){return this.width+"x"+this.height}}var r=e("./utils.js");n.createBid=function(e){return new i(e)}},{"./utils.js":15}],12:[function(e,t,n){function i(e,t){var n={},i=c.bidderSettings||{};return e&&t&&i&&i[e]?r(n,i[e],t):w[e]?r(n,w[e],t):t&&i&&(i[u.JSON_MAPPING.BD_SETTING_STANDARD]||(i[u.JSON_MAPPING.BD_SETTING_STANDARD]={adserverTargeting:[{key:"hb_bidder",val:function(e){return e.bidderCode}},{key:"hb_adid",val:function(e){return e.adId}},{key:"hb_pb",val:function(e){return e.pbMg}},{key:"hb_size",val:function(e){return e.size}}]}),t.usesGenericKeys=!0,r(n,i[u.JSON_MAPPING.BD_SETTING_STANDARD],t)),n}function r(e,t,n){var i=t[u.JSON_MAPPING.ADSERVER_TARGETING];return n.size=n.getSize(),l._each(i,function(t){var i=t.key,r=t.val;if(l.isFn(r))try{e[i]=r(n)}catch(d){l.logError("bidmanager","ERROR",d);
}else e[i]=r}),e}function d(e){var t=[e];o(p,t)}function o(e,t){var n;if(l.isArray(e))for(n=0;n<e.length;n++){var i=e[n];a(i,t)}else a(e,t)}function a(e,t){if("function"==typeof e)try{e.apply(c,t)}catch(n){l.logError("Error executing callback function: "+n.message)}}function s(e){for(var t=0;t<c.adUnits.length;t++){var n=c.adUnits[t];if(n.code===e){var i=y[e].bidsReceivedCount;i===n.bids.length&&d(e)}}}var c,u=e("./constants.json"),l=e("./utils.js"),g=e("./adbridg/proxy");g.waitForPbjs(function(e){c=e});var f="function",p=[],h=[],m=null,b={},v={};n.pbCallbackMap=v;var y={};n.pbBidResponseByPlacement=y;var _={};n._adResponsesByBidderId=_;var B=0;n.bidRequestCount=B;var A=0;n.bidResponseRecievedCount=A;var S=!1,C=!1,w={},E={},T=!1,I={};n.getPlacementIdByCBIdentifer=function(e){return v[e]},n.incrementBidCount=function(){B++},n.getBidResponseByAdUnit=function(e){return y},n.clearAllBidResponses=function(e){S=!1,C=!1,B=0,A=0,h.called=!1;for(var t in this.pbBidResponseByPlacement)delete this.pbBidResponseByPlacement[t]},n.addBidResponse=function(e,t){var n={};if(t){t.requestTimestamp=E[t.bidderCode],t.responseTimestamp=(new Date).getTime(),t.timeToRespond=t.responseTimestamp-t.requestTimestamp,A++,2===t.getStatusCode()&&(t.cpm=0);var r=l.getPriceBucketString(t.cpm,t.height,t.width);t.pbLg=r.low,t.pbMg=r.med,t.pbHg=r.high,T&&(I[t.adbuid]=I[t.adbuid]||[],I[t.adbuid].push([t.adbbdr,t.adbbuid,t.getStatusCode(),t.cpm||0,t.timeToRespond])),t.adUnitCode=e,t.bidder=t.bidderCode;var d={};t.bidderCode&&0!==t.cpm&&(d=i(t.bidderCode,t),t.adserverTargeting=d),t.adId&&(_[t.adId]=t),e&&y[e]?(n=y[e],n.bids.push(t),n.bidsReceivedCount++):l.logError("Internal error in bidmanager.addBidResponse. Params: "+e+" & "+t)}else n=this.createEmptyBidResponseObj();y[e]=n,this.checkIfAllBidsAreIn(e)},n.createEmptyBidResponseObj=function(){return{bids:[],allBidsAvailable:!1,bidsReceivedCount:0}},n.registerDefaultBidderSetting=function(e,t){w[e]=t},n.registerBidRequestTime=function(e,t){E[e]=t},n.executeCallbackFromTimeout=function(){B!=A&&(T=(new Date).getTime(),g.analytics("timedOut",B-A)),n.executeCallback()},n.executeCallback=function(){if(typeof c.registerBidCallbackHandler===f&&!C)try{c.registerBidCallbackHandler(),C=!0}catch(e){C=!0,l.logError("Exception trying to execute callback handler registered : "+e.message)}if(h.called!==!0){var t=[];o(h,t),h.called=!0}m&&(o(m),m=null)},n.allBidsBack=function(){return S},n.setBidderMap=function(e){b=e},n.checkIfAllBidsAreIn=function(e){0!==B&&B===A&&(S=!0),s(e),S&&(T&&(g.analytics("latencyBids",I),I={},T=!1),this.executeCallback())},n.addOneTimeCallback=function(e){m=e},n.addCallback=function(e,t,n){t.id=e,u.CB.TYPE.ALL_BIDS_BACK===n?h.push(t):u.CB.TYPE.AD_UNIT_BIDS_BACK===n&&p.push(t)}},{"./adbridg/proxy":9,"./constants.json":13,"./utils.js":15}],13:[function(e,t,n){t.exports={JSON_MAPPING:{PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},DEBUG_MODE:"adb_debug",STATUS:{GOOD:"good",TIMEOUT:"timed out"},CB:{TYPE:{ALL_BIDS_BACK:"allRequestedBidsBack",AD_UNIT_BIDS_BACK:"adUnitBidsBack"}},objectType_function:"function",objectType_undefined:"undefined",objectType_object:"object",objectType_string:"string",objectType_number:"number"}},{}],14:[function(e,t,n){function i(){for(var e=0;e<m.que.length;e++)typeof m.que[e].called===S&&(m.que[e].call(),m.que[e].called=!0)}function r(e,t){var n=0;if(n=typeof e===S||null===e?m.bidderTimeout:e,!d())return void v.logMessage("No adUnits configured. No bids requested.");if(setTimeout(y.executeCallbackFromTimeout,n),t&&v.isArray(t))for(var i=0;i<t.length;i++){for(var r=0;r<m.adUnits.length;r++)m.adUnits[r].code===t[i]&&(T=[m.adUnits[r]]);a(),o()}else T=m.adUnits,a(),o()}function d(){return m.adUnits&&0!==m.adUnits.length?!0:!1}function o(e){var t=Object.keys(I).map(function(e){return I[e]});typeof e===A&&t.sort(e),_.callBids(t)}function a(){for(var e=0;e<T.length;e++){var t=T[e][b.JSON_MAPPING.PL_BIDS],n=T[e][b.JSON_MAPPING.PL_CODE];s(T[e][b.JSON_MAPPING.PL_CODE],T[e][b.JSON_MAPPING.PL_SIZE],t),y.addBidResponse(n)}for(e=0;e<E.length;e++)E[e].loadPreBid();y.setBidderMap(I)}function s(e,t,n){for(var i=0;i<n.length;i++){y.incrementBidCount();var r=n[i];r.placementCode=e,r.sizes=t;var d=n[i][b.JSON_MAPPING.BD_BIDDER],o=I[d];if(typeof o===S){var a={bidderCode:d,bids:[]};a.bids.push(r),I[d]=a}else o.bids.push(r)}}function c(e){var t={};return e&&0!==e.length&&(e.sort(function(e,t){return t.cpm-e.cpm}),t=e[0]),t.bid}function u(e,t,n){var i=[];if(0!==n.bids.length)for(var r=0;r<n.bids.length;r++){var d=n.bids[r];if(d.usesGenericKeys)i.push({cpm:d.cpm,bid:d});else{var o=n.bids[r].adserverTargeting;for(var a in o)if(o.hasOwnProperty(a))try{v.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+a+" value: "+encodeURIComponent(o[a])),t.setTargeting(a,encodeURIComponent(o[a]))}catch(s){v.logError("Problem setting key value pairs in slot: "+s.message)}}}else v.logMessage("No bids eligble for adUnit code : "+e);if(0!==i.length){var u=c(i);B.analytics("winningUnitBid",u);var l=u.adserverTargeting;for(var a in l)if(l.hasOwnProperty(a))try{v.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+a+" value: "+encodeURIComponent(l[a])),t.setTargeting(a,encodeURIComponent(l[a]))}catch(s){v.logError("Problem setting key value pairs in slot: "+s.message)}}}function l(e){var t={};return e?(t=y.pbBidResponseByPlacement[e],t?t:y.createEmptyBidResponseObj()):y.pbBidResponseByPlacement}function g(e){var t=[],n=[],i={};if(e)for(var r=0;r<e.length;r++){var d=e[r];i=f(d),d.usesGenericKeys?n.push({cpm:d.cpm,bid:d}):P[i.adUnitCode]=i.adserverTargeting,t.push(i)}if(0!==n.length){var o=c(n),a=o.adserverTargeting;P[i.adUnitCode]=a}return t}function f(e){var t={};if(e){var n=JSON.stringify(e);t=JSON.parse(n),delete t.pbLg,delete t.pbMg,delete t.pbHg}return t}function p(){y.clearAllBidResponses(),I={}}function h(e){var t=e;p(),r(t)}var m={que:[]},b=e("./constants.json"),v=e("./utils.js"),y=e("./bidmanager.js"),_=e("./adaptermanager"),B=e("./adbridg/proxy"),A="function",S="undefined",C="object",w="string";t.exports=m;var E=[],T=[],I={},P={};m.bidderTimeout=m.bidderTimeout||3e3,m.logging=v.logging||!1,m.libLoaded=!0,m.adUnits=m.adUnits||[],m.que.push=function(e){if(typeof e===A)try{e.call()}catch(t){v.logError("Error processing command :"+t.message)}else v.logError("Commands written into pbjs.que.push must wrapped in a function")},m.getAdserverTargetingForAdUnitCode=function(e){return m.getBidResponses(e),e?P[e]:P},m.getAdserverTargeting=function(){return m.getAdserverTargetingForAdUnitCode()},m.getBidResponses=function(e){var t={},n=[],i={};if(e)t=l(e),n=[],t&&t.bids&&(n=g(t.bids)),i={bids:n};else{t=l();for(var r in t)t.hasOwnProperty(r)&&(t&&t[r]&&t[r].bids&&(n=g(t[r].bids)),i[r]={bids:n})}return i},m.getBidResponsesForAdUnitCode=function(e){return m.getBidResponses(e)},m.setTargetingForAdUnitsGPTAsync=function(e){if(!window.googletag||!window.googletag.pubads()||!window.googletag.pubads().getSlots())return void v.logError("window.googletag is not defined on the page");var t=e;typeof e===w?t=[e]:typeof e===C&&(t=e);var n={},i=0;if(t)for(i=0;i<t.length;i++)for(var r=t[i],d=window.googletag.pubads().getSlots(),o=0;o<d.length;o++)d[o].getAdUnitPath()===r&&(n=l(r),u(r,d[o],n));else{var d=window.googletag.pubads().getSlots();for(i=0;i<d.length;i++){var a=d[i].getAdUnitPath();a&&(n=l(a),u(a,d[i],n))}}},m.setTargetingForGPTAsync=function(){m.setTargetingForAdUnitsGPTAsync()},m.allBidsAvailable=function(){return y.allBidsBack()},m.renderAd=function(e,t){if(v.logMessage("Calling renderAd with adId :"+t),e&&t)try{var n=y._adResponsesByBidderId[t];if(n){var i=n.height,r=n.width,d=n.adUrl,o=n.ad;if("aol"==n.bidderCode)try{n.adbinfo+=","+(String(o).match(/\<img[^\>]+(adserver\.adtechus\.com[^"']+)/)||[]).pop()}catch(a){}o?(e.write(o),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=i),B.resize(n.adUnitCode,r,i)):d?(e.write('<IFRAME SRC="'+d+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="'+r+'" HEIGHT="'+i+'"></IFRAME>'),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=i)):v.logError("Error trying to write ad. No ad for bid response id: "+t)}else v.logError("Error trying to write ad. Cannot find ad by given id : "+t)}catch(a){v.logError("Error trying to write ad Id :"+t+" to the page:"+a.message)}else v.logError("Error trying to write ad Id :"+t+" to the page. Missing document or adId")},m.requestBidsForAdUnit=function(e){p(),r(e)},m.requestBidsForAdUnits=function(e){if(!e||e.constructor!==Array)return void v.logError("requestBidsForAdUnits must pass an array of adUnits");p();var t=m.adUnits.slice(0);m.adUnits=e,r(),m.adUnits=t},m.removeAdUnit=function(e){if(e)for(var t=0;t<m.adUnits.length;t++)m.adUnits[t].code===e&&(m.adUnits=m.adUnits.splice(t,1))},m.requestBids=function(e){if(e){var t=e.adUnitCodes,n=e.adUnits,i=e.timeout,d=e.bidsBackHandler,o=m.adUnits.slice(0);typeof d===A&&y.addOneTimeCallback(d),t&&v.isArray(t)?(p(),r(i,t)):n&&v.isArray(n)?(p(),m.adUnits=n,r(i)):h(i),m.adUnits=o}else h()},m.addAdUnits=function(e){v.isArray(e)?m.adUnits.push.apply(m.adUnits,e):typeof e===C&&m.adUnits.push(e)},m.addCallback=function(e,t){var n=null;return e&&t&&typeof t===A?(n=v.getUniqueIdentifierStr,y.addCallback(n,t,e),n):(v.logError("error registering callback. Check method signature"),n)},m.removeCallback=function(e){},B.setPbjs(m),i()},{"./adaptermanager":1,"./adbridg/proxy":9,"./bidmanager.js":12,"./constants.json":13,"./utils.js":15}],15:[function(e,t,n){function i(){return y()+Math.random().toString(16).substr(2)}function r(){return window.console&&window.console.log}var d=e("./constants.json"),o=e("./adbridg/proxy"),a="function",s="object",c="string",u="number",l=!1,g=5,f=20,p=20,h="Array",m="String",b="Function",v=Object.prototype.hasOwnProperty;Array.prototype.slice;n.replaceTokenInString=function(e,t,n){return this._each(t,function(t,i){t=void 0===t?"":t;var r=n+i.toUpperCase()+n,d=new RegExp(r,"g");e=e.replace(d,t)}),e};var y=function(){var e=0;return function(){return e++,e}}();n.getUniqueIdentifierStr=i,n.getBidIdParamater=function(e,t){return t&&t[e]?t[e]:""},n.tryAppendQueryString=function(e,t,n){return n?e+=t+"="+encodeURIComponent(n)+"&":e},n.parseQueryStringParameters=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t},n.parseSizesInput=function(e,t){var n,i=[];if(typeof e===c){var r=e.split(","),d=/^(\d)+x(\d)+$/i;if(r)for(var o in r)hasOwn(r,o)&&r[o].match(d)&&i.push(r[o])}else if(typeof e===s){var a=e.length;if(a>0)if(2===a&&typeof e[0]===u&&typeof e[1]===u)i.push(this.parseGPTSingleSizeArray(e));else for(var l=0;a>l;l++)i.push(this.parseGPTSingleSizeArray(e[l]))}if(t)return i;var g=i.length;if(g>0&&(n="size="+i[0],g>1)){n+="&promo_sizes=";for(var f=1;g>f;f++)n+=i[f]+=",";n&&","===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1))}return n},n.combineSizeInputs=function(){var e,t,i,r,d={},o=[];for(e=0;e<arguments.length;++e)for(i=n.parseSizesInput(arguments[e],!0),t=0;t<i.length;++t)r=i[t],d[r]||(d[r]=1,r=r.split("x"),o.push(r));return 1==o.length?o.pop():o},n.parseGPTSingleSizeArray=function(e){return!n.isArray(e)||2!==e.length||isNaN(e[0])||isNaN(e[1])?void 0:e[0]+"x"+e[1]},n.getTopWindowUrl=function(){try{return window.top.location.href}catch(e){return window.location.href}},n.getTopWindowRef=function(){try{return window.top.document.referrer}catch(e){return window.document.referrer}},n.logMessage=function(e){B()&&r()&&console.log("MESSAGE: "+e)},n.hasConsoleLogger=r;var _=function(e){return e?window.console.error?"error":"log":""}(r());n.logging=!1,n.enableDebug=function(){n.logging=!0};var B=function(){return n.logging===!1&&l===!1&&(n.logging=!!A(d.DEBUG_MODE),l=!0),n.logging?!0:!1};n.debugTurnedOn=B,n.logError=function(e,t,n){var i=t||"ERROR";if(o.analytics("pbjsError",e),B()&&r())try{console[_].call(console,i+": "+e,n||"")}catch(d){console.log(i+": "+e,n||"")}},n.createInvisibleIframe=function(e){var t=document.createElement("iframe");return t.id=i(),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",e||(t.src="about:self"),t.style="display:none",t};var A=function(e){var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),i=n.exec(window.location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))};n.getPriceBucketString=function(e){var t="",n="",i="",r=0,d={low:t,med:n,high:i};try{r=parseFloat(e),r&&(r>g?d.low=g.toFixed(2):d.low=(Math.floor(2*e)/2).toFixed(2),r>f?d.med=f.toFixed(2):d.med=(Math.floor(10*e)/10).toFixed(2),r>p?d.high=p.toFixed(2):d.high=(Math.floor(100*e)/100).toFixed(2))}catch(o){this.logError("Exception parsing CPM :"+o.message)}return d},n.hasValidBidRequest=function(e,t,n){for(var i=0;i<t.length;i++){var r=!1;if(this._each(e,function(e,n){n===t[i]&&(r=!0)}),!r)return this.logError("Params are missing for bid request. One of these required paramaters are missing: "+t,n),!1}return!0},n.addEventHandler=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)},n.isA=function(e,t){try{return toString.call(e)==="[object "+t+"]"}catch(n){switch(t){case h:return e.constructor===Array.prototype.constructor;case m:return e.constructor===String.prototype.constructor;case b:return typeof e==a}return!1}},n.isFn=function(e){return this.isA(e,b)},n.isStr=function(e){return this.isA(e,m)},n.isArray=function(e){return this.isA(e,h)},n.isEmpty=function(e){if(!e)return!0;if(this.isArray(e)||this.isStr(e))return!(e.length>0);for(var t in e)if(v.call(e,t))return!1;return!0},n._each=function(e,t){if(!this.isEmpty(e)){if(this.isFn(e.forEach))return e.forEach(t);var n=0,i=e.length;if(i>0)for(;i>n;n++)t(e[n],n,e);else for(n in e)v.call(e,n)&&t(e[n],n,e)}},n.tryBidHandler=function(e){return function(){try{e.apply(null,arguments)}catch(t){o.analytics("postBidError",t.stack||t.message)}}},n.BreakException={}},{"./adbridg/proxy":9,"./constants.json":13}]},{},[7]);